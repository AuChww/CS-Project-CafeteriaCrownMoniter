# ‡∏Ñ‡∏±‡∏î‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡πÅ‡∏Ñ‡πà 5 ‡∏ß‡∏¥‡πÅ‡∏£‡∏Å
import torch
import cv2
import numpy as np
import os
from ultralytics import YOLO

# import os
# os.environ['QT_QPA_PLATFORM'] = 'xcb'
# os.environ['QT_QPA_PLATFORM_PLUGIN_PATH'] = '/usr/lib/x86_64-linux-gnu/qt5/plugins/platforms'

model = YOLO('yoloModel/yolov8s.pt')  

face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')

def get_zone_human_count(video_id):

    video_path = os.path.join(os.path.dirname(__file__), f"../public/video/zone/{video_id}.mp4")
        # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if not os.path.exists(video_path):
        print(f"Video file for zone {video_id} not found.")
        return 0  
    
    cap = cv2.VideoCapture(video_path)
    
    roi_zones = {
    1: {"top_left": (50, 50), "bottom_right": (1500, 1500)},
    2: {"top_left": (50, 50), "bottom_right": (1500, 1500)},
    3: {"top_left": (100, 100), "bottom_right": (1400, 1400)}
}

    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏ã‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if id in roi_zones:
        roi_top_left = roi_zones[id]["top_left"]
        roi_bottom_right = roi_zones[id]["bottom_right"]
    else:
        roi_top_left = (50,50)
        roi_bottom_right = (1500, 1500)  

    # # ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö (ROI)
    # roi_top_left = (50, 50)  # ‡∏à‡∏∏‡∏î‡∏°‡∏∏‡∏°‡∏ö‡∏ô‡∏ã‡πâ‡∏≤‡∏¢
    # roi_bottom_right = (1500, 1500)  # ‡∏à‡∏∏‡∏î‡∏°‡∏∏‡∏°‡∏•‡πà‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤

    # ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏ü‡∏£‡∏°
    all_human_counts = []
    frame_number = 0

    # ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ (‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ü‡∏£‡∏°)
    fps = cap.get(cv2.CAP_PROP_FPS)  # Frames per second
    total_frames = int(cap.get(cv2.CAP_PROP_FRAME_COUNT))

    # ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    frames_to_process = int(fps * 1)  # 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏£‡∏Å

    while True:
        ret, frame = cap.read()
        if not ret or frame_number >= frames_to_process:
            break  # ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å loop ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏£‡∏ö 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

        frame_number += 1

        # ‡∏Ç‡πâ‡∏≤‡∏°‡∏ó‡∏∏‡∏Å ‡πÜ 10 ‡πÄ‡∏ü‡∏£‡∏°
        if frame_number % 10 != 0:
            continue

        results = model(frame)
        detections = results[0].boxes.xyxy.cpu().numpy()  # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• bounding boxes
        classes = results[0].boxes.cls.cpu().numpy()     # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• class
        
        human_count = 0

        for i, box in enumerate(detections):
            left, top, right, bottom = map(int, box[:4])
            cls = int(classes[i])

            # ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô ROI
            if cls == 0 and (left > roi_top_left[0] and right < roi_bottom_right[0] and
                             top > roi_top_left[1] and bottom < roi_bottom_right[1]):  
                human_count += 1

        all_human_counts.append(human_count)

       
        if frame_number % 30 == 0:
            print(f"Frame {frame_number}: zone {video_id} : Human Count = {human_count}")
            
        # cv2.imshow('YOLOv8 Human Detection', frame)

    cap.release()
    cv2.destroyAllWindows()

    # ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á all_human_counts
    return all_human_counts[-1] if all_human_counts else 0


def get_zone_human_count(video_id):
    video_path = os.path.join(os.path.dirname(__file__), f"../public/video/zone/{video_id}.mp4")

    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if not os.path.exists(video_path):
        print(f"Video file for zone {video_id} not found.")
        return 0  
    
    cap = cv2.VideoCapture(video_path)
    
    roi_zones = {
        1: {"top_left": (50, 50), "bottom_right": (1500, 1500)},
        2: {"top_left": (50, 50), "bottom_right": (1500, 1500)},
        3: {"top_left": (100, 100), "bottom_right": (1400, 1400)}
    }

    # ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÇ‡∏ã‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if video_id in roi_zones:
        roi_top_left = roi_zones[video_id]["top_left"]
        roi_bottom_right = roi_zones[video_id]["bottom_right"]
    else:
        roi_top_left = (50, 50)
        roi_bottom_right = (1500, 1500)  

    all_human_counts = []
    frame_number = 0

    while True:
        ret, frame = cap.read()
        if not ret:  
            break  # ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å loop ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠

        frame_number += 1

        results = model(frame)
        detections = results[0].boxes.xyxy.cpu().numpy()  # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• bounding boxes
        classes = results[0].boxes.cls.cpu().numpy()     # ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• class
        
        human_count = 0

        for i, box in enumerate(detections):
            left, top, right, bottom = map(int, box[:4])
            cls = int(classes[i])

            # ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô ROI
            if cls == 0 and (left > roi_top_left[0] and right < roi_bottom_right[0] and
                             top > roi_top_left[1] and bottom < roi_bottom_right[1]):  
                human_count += 1

                # üî• ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡∏Ñ‡∏ô
                cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)  # ‡∏™‡∏µ‡πÅ‡∏î‡∏á
                cv2.putText(frame, f"ID {i+1}", (left, top - 10), 
                            cv2.FONT_HERSHEY_SIMPLEX, 0.7, (0, 0, 255), 2)  # ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏•‡∏Ç ID

        all_human_counts.append(human_count)

        # ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≠‡∏ö ROI
        cv2.rectangle(frame, roi_top_left, roi_bottom_right, (0, 255, 0), 2)  # ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
        cv2.putText(frame, f"Zone {video_id}: {human_count}", (roi_top_left[0], roi_top_left[1] - 10), 
                    cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 255, 0), 2)

        # ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
        cv2.imshow('YOLOv8 Human Detection', frame)

        # ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î 'q'
        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

    cap.release()
    cv2.destroyAllWindows()

    # ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á all_human_counts
    return all_human_counts[-1] if all_human_counts else 0


# get_zone_human_count(9)


def get_restaurant_human_count(restaurant_id_first,restaurant_id_second):
    # ‡∏™‡∏£‡πâ‡∏≤‡∏á path ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠
    # zone_id = "{zone_id}.mp4"
    video_path = os.path.join(os.path.dirname(__file__), f"../public/video/restaurant/{restaurant_id_first,restaurant_id_second}.mp4")
    
    if not os.path.exists(video_path):
        print(f"Video file {restaurant_id_first,restaurant_id_second} not found.")
        return 0  
    
    cap = cv2.VideoCapture(video_path)

    # ‡∏Å‡∏≥‡∏´‡∏ô‡∏î ROI (Region of Interest)
    roi_areas = {
        restaurant_id_first: [(0, 0), (200, 400)],  
        restaurant_id_second : [(200, 0), (400, 400)],
    }

    frame_number = 0
    human_counts = {zone: [] for zone in roi_areas}

    def is_within_roi(left, top, right, bottom, roi_top_left, roi_bottom_right):
        return (left > roi_top_left[0] and right < roi_bottom_right[0] and
                top > roi_top_left[1] and bottom < roi_bottom_right[1])
    
    # ‡∏´‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ (‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏ü‡∏£‡∏°)
    fps = cap.get(cv2.CAP_PROP_FPS)  # Frames per second
    total_frames = int(cap.get(cv2.CAP_PROP_FRAME_COUNT))

    frames_to_process = int(fps * 100)  # 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏£‡∏Å

    while True:
        ret, frame = cap.read()
        if not ret or frame_number >= frames_to_process:
            break  # ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å loop ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ñ‡∏£‡∏ö 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

        frame_number += 1

        # ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ö‡∏≤‡∏á‡πÄ‡∏ü‡∏£‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞ (‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ó‡∏∏‡∏Å 5 ‡πÄ‡∏ü‡∏£‡∏°)
        if frame_number % 10 != 0:
            continue

        
        small_frame = cv2.resize(frame, (640, 360))
        print(f"after small frame {restaurant_id_first,restaurant_id_second}")

        results = model(small_frame)
        detections = results[0].boxes.xyxy.cpu().numpy()
        classes = results[0].boxes.cls.cpu().numpy()

        current_counts = {zone: 0 for zone in roi_areas}
        
        

        for i, box in enumerate(detections):
            left, top, right, bottom = map(int, box[:4])
            cls = int(classes[i])

            if cls == 0:  # ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏ô
                for zone, (roi_top_left, roi_bottom_right) in roi_areas.items():
                    if is_within_roi(left, top, right, bottom, roi_top_left, roi_bottom_right):
                        current_counts[zone] += 1

        # ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ ROI
        for zone in roi_areas:
            human_counts[zone].append(current_counts[zone])

        # ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏Ñ‡πà‡∏ó‡∏∏‡∏Å‡πÜ 10 ‡πÄ‡∏ü‡∏£‡∏°
        if frame_number % 60 == 0:
            for zone, (roi_top_left, roi_bottom_right) in roi_areas.items():
                cv2.rectangle(frame, roi_top_left, roi_bottom_right, (0, 0, 255), 2)
                cv2.putText(frame, f"{zone}: {current_counts[zone]}", (roi_top_left[0], roi_top_left[1] - 10),
                cv2.FONT_HERSHEY_SIMPLEX, 0.7, (0, 0, 255), 2)
                
            cv2.imshow('YOLOv8 Human Detection', frame)

        # if cv2.waitKey(1) & 0xFF == ord('q'):
        #     break

    cap.release()
    # cv2.destroyAllWindows()
    
    for zone in roi_areas:
        print(f"{zone}: {human_counts[zone][-1] if human_counts[zone] else 0}")

    print(f"success human count")

    return [ (zone, human_counts[zone][-1] if human_counts[zone] else 0) for zone in roi_areas ]


# def get_restaurant_human_count(restaurant_id_first, restaurant_id_second):
#     video_path = os.path.join(os.path.dirname(__file__), f"../public/video/restaurant/{restaurant_id_first},{restaurant_id_second}.mp4")
    
#     if not os.path.exists(video_path):
#         print(f"Video file {restaurant_id_first}, {restaurant_id_second} not found.")
#         return 0  
    
#     cap = cv2.VideoCapture(video_path)

#     # üü¢ ‡∏Å‡∏≥‡∏´‡∏ô‡∏î ROI (Region of Interest) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏ã‡∏ô
#     roi_areas = {
#         restaurant_id_first: [(0, 0), (400, 400)],  
#         restaurant_id_second: [(400, 0), (800, 400)],
#     }

#     frame_number = 0
#     human_counts = {zone: [] for zone in roi_areas}

#     def is_within_roi(left, top, right, bottom, roi_top_left, roi_bottom_right):
#         return (left > roi_top_left[0] and right < roi_bottom_right[0] and
#                 top > roi_top_left[1] and bottom < roi_bottom_right[1])

#     fps = cap.get(cv2.CAP_PROP_FPS)  

#     while True:
#         ret, frame = cap.read()
#         if not ret:
#             break  

#         frame_number += 1

#         if frame_number % 10 != 0:
#             continue
        
#         print(f"Processing frame {frame_number} for {restaurant_id_first}, {restaurant_id_second}")

#         results = model(frame)
#         detections = results[0].boxes.xyxy.cpu().numpy()
#         classes = results[0].boxes.cls.cpu().numpy()

#         current_counts = {zone: 0 for zone in roi_areas}

#         # üî≤ ‡∏ß‡∏≤‡∏î ROI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡πâ‡∏≤‡∏ô (‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß)
#         for zone, (roi_top_left, roi_bottom_right) in roi_areas.items():
#             cv2.rectangle(frame, roi_top_left, roi_bottom_right, (0, 255, 0), 2)
#             cv2.putText(frame, f"{zone}", (roi_top_left[0] + 10, roi_top_left[1] + 30),
#                         cv2.FONT_HERSHEY_SIMPLEX, 0.7, (0, 255, 0), 2)

#         for i, box in enumerate(detections):
#             left, top, right, bottom = map(int, box[:4])
#             cls = int(classes[i])

#             if cls == 0:  
#                 in_any_zone = False  

#                 for zone, (roi_top_left, roi_bottom_right) in roi_areas.items():
#                     if is_within_roi(left, top, right, bottom, roi_top_left, roi_bottom_right):
#                         current_counts[zone] += 1
#                         in_any_zone = True
                        
#                         # üî¥ ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ô‡∏±‡∏ö (‡∏™‡∏µ‡πÅ‡∏î‡∏á)
#                         cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)  
#                         cv2.putText(frame, f"ID {i+1}", (left, top - 10), 
#                                     cv2.FONT_HERSHEY_SIMPLEX, 0.7, (0, 0, 255), 2)

#                 if not in_any_zone:
#                     # üîµ ‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö
#                     cv2.rectangle(frame, (left, top), (right, bottom), (255, 0, 0), 2)
#                     cv2.putText(frame, f"ID {i+1} (Out)", (left, top - 10),
#                                 cv2.FONT_HERSHEY_SIMPLEX, 0.7, (255, 0, 0), 2)

#         # ‡∏´‡∏¢‡∏∏‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î 'q'
#         if cv2.waitKey(1) & 0xFF == ord('q'):
#             break

#         for zone in roi_areas:
#             human_counts[zone].append(current_counts[zone])

#         # ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
#         if frame_number % 60 == 0:
#             for zone, (roi_top_left, _) in roi_areas.items():
#                 cv2.putText(frame, f"{zone}: {current_counts[zone]}", 
#                             (roi_top_left[0] + 10, roi_top_left[1] + 50),
#                             cv2.FONT_HERSHEY_SIMPLEX, 0.7, (0, 255, 0), 2)
            
#         cv2.imshow('YOLOv8 Human Detection', frame)

#     cap.release()
#     # cv2.destroyAllWindows()

#     for zone in roi_areas:
#         print(f"{zone}: {human_counts[zone][-1] if human_counts[zone] else 0}")

#     print("‚úÖ Success: Human count completed.")

#     return [(zone, human_counts[zone][-1] if human_counts[zone] else 0) for zone in roi_areas]



get_restaurant_human_count(3,4)